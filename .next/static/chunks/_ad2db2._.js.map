{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/ppqwqqq/qwq_sites/ppqwqqq.space/app/editor/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface Article {\n  id: number;\n  title: string;\n  description: string;\n  content: string;\n  date: string;\n  author: string;\n}\n\nconst EditorPage = () => {\n  const router = useRouter();\n  const [article, setArticle] = useState<Article | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [formData, setFormData] = useState<Article>({\n    id: 0,\n    title: '',\n    description: '',\n    content: '',\n    date: '',\n    author: ''\n  });\n\n  const { id } = router.query; // Assuming you pass the article ID in the route\n\n  useEffect(() => {\n    const fetchArticle = async () => {\n      try {\n        if (!id) return;\n        const response = await fetch(`http://localhost:8080/articles/${id}`);\n        if (!response.ok) {\n          throw new Error('文章加载失败');\n        }\n        const data = await response.json();\n        setArticle(data);\n        setFormData(data);\n        setLoading(false);\n      } catch (err: any) {\n        setError(err.message);\n        setLoading(false);\n      }\n    };\n\n    fetchArticle();\n  }, [id]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await fetch(`http://localhost:8080/articles/${formData.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n\n      if (!response.ok) {\n        throw new Error('更新失败');\n      }\n\n      // Successfully saved, redirect to the updated article\n      router.push(`/blog/${formData.id}`);\n    } catch (err: any) {\n      setError(err.message);\n    }\n  };\n\n  // 加载中的提示或错误处理\n  if (loading) return <p>加载中...</p>;\n  if (error) return <p>错误: {error}</p>;\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-6\">\n      <h1 className=\"text-3xl font-bold mb-6\">编辑文章</h1>\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700\">标题</label>\n          <input\n            type=\"text\"\n            id=\"title\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleChange}\n            className=\"mt-2 p-2 border border-gray-300 rounded w-full\"\n            placeholder=\"请输入文章标题\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-4\">\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">简短描述</label>\n          <input\n            type=\"text\"\n            id=\"description\"\n            name=\"description\"\n            value={formData.description}\n            onChange={handleChange}\n            className=\"mt-2 p-2 border border-gray-300 rounded w-full\"\n            placeholder=\"请输入简短描述\"\n            required\n          />\n        </div>\n\n        <div className=\"mb-4\">\n          <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700\">内容</label>\n          <textarea\n            id=\"content\"\n            name=\"content\"\n            value={formData.content}\n            onChange={handleChange}\n            className=\"mt-2 p-2 border border-gray-300 rounded w-full\"\n            rows={6}\n            placeholder=\"请输入文章内容\"\n            required\n          />\n        </div>\n\n        <div className=\"flex justify-end mt-6\">\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary\"\n          >\n            保存更改\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default EditorPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///home/ppqwqqq/qwq_sites/ppqwqqq.space/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}